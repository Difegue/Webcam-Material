<head>
	<link rel='shortcut icon' type='image/x-icon' href='./favicon.ico' />
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="./style/materialize.min.css">
  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!-- Compiled and minified JavaScript -->
	<script type="text/javascript" src="./js/jquery-2.1.1.min.js"></script>
	<script src="./js/materialize.min.js"></script>
	<script src="./js/functions.js"></script>
	<script src="./js/jQueryRotate.js"></script>
	<title>[% title %]</title>
	 <meta charset="UTF-8"> 
</head>

<body>

	<nav>
		<div class="nav-wrapper [% color %] accent-2">
			<a href="#" class="brand-logo center ">[% title %]</a>
		</div>
	</nav>

	<br/>
	<br/>

	<!-- Page Layout here -->

	<div class="row container">

	<center>

		<div class="col s12 m12 l11"  onclick="refreshPicture(1); refreshPicture(2);">
			
			<ul id="wat" class="tabs" style="margin-bottom:5px;">
			        <li class="tab col s3 "><a class="active" href="#cam1">Camera 1</a></li>
			        <!--<li class="tab col s3 "><a href="#cam2">Camera 2</a></li>-->
			</ul>
			

			<div id="cam1" style=""> <!-- Note that "m8 l9" was added -->
				<img class="z-depth-3 responsive-img" id="camjpg1" width="1280" height="720" alt="Live Stream" id="webcam1" 
					src="./style/offline.png">
			</div>

			<div id="cam2" style="">
				<!--<img class="z-depth-3 responsive-img" id="camjpg2" width="1280" height="720" alt="Live Stream" id="webcam2" src="./stream/cam_2.jpg">-->
			</div>
		</div>
		 

		<div class="col s12 m12 l1" id="buttons" style="margin-top:20px">

			<a data-delay="10" data-position="top" style="margin-bottom: 8px; margin-left: 8px" id="main" class="btn-floating btn-large btn tooltipped waves-effect waves-light [% color %] accent-2" onclick="savePicture()" data-tooltip="Take Screenshot"><i class="material-icons">photo_camera</i></a>
  
			<a data-delay="10" data-position="top" style="margin-bottom: 8px; margin-left: 8px" id="main" class="btn-floating btn-large waves-effect waves-light [% color %] accent-2 btn tooltipped" onclick="rotateCurrentCamera()" data-tooltip="Rotate Camera"><i class="material-icons">rotate_right</i></a>

			<!--<a data-delay="10" data-position="top" style="margin-bottom: 8px; margin-left: 8px" id="main" class="btn-floating btn-large waves-effect waves-light [% color %] accent-2 btn tooltipped" onclick="streamSwitch(true)" data-tooltip="Switch Stream Type"><i class="mdi-av-videocam"></i></a>-->

			 <a data-delay="10" data-position="top" style="margin-bottom: 8px; margin-left: 8px; cursor: default;" class="btn-floating btn-large red btn tooltipped" data-tooltip="Viewers"><span id="viewers" style=" font-size:30px">1</span></a>
   
			  <br>
			  <br>
			  <div id="stream_indic" style="color: #9e9e9e;margin-left: 10px">Quality: None</div>
  
		</div>

	</center>

	</div>

	 

	<div class="row container">

		 <div class="row">
<form id="voiceform" onsubmit="sendMessage();return false;" action="javascript:void(0);">

	<div class="input-field col s6">
                <input type="text" id="textarea2">
            	<label class="" for="textarea2">LDAP Login</label>
        </div>

        <div class="input-field col s6">
          <input id="password" type="password" class="validate">
          <label for="password">Password</label>
        </div>

        <div class="input-field col s11">
           
		<input id="textarea1" type="text" length="100"></input>
			[% IF audioenabled %]
				<label for="textarea1">Send Audio Message</label>
			[% ELSE %]
				<label for="textarea1">Send Message</label>
			[% END %]
            </form>
        </div>

        <div class=" col s1">

			<a data-delay="10" style=" margin-top: 5px" data-position="top" class="btn-floating btn-large btn tooltipped waves-effect waves-light [% color %] accent-2" onclick="sendMessage()" data-tooltip="Send Message"><i class="material-icons">send</i></a>
        </div>

    </div>


     <div class="row">
		<div class="col s6 m6 l6" style="margin-top:10px">
			<div class="card [% color %] lighten-2 z-depth 3">
				<div class="card-content white-text" id="screenshots">
					<p>Screenshots (Right click to save) :</p>
					<br/>
				</div>
			</div>
		</div>
		
		<div class="col s6 m6 l6" style="margin-top:10px">
			<div class="card [% color %] lighten-2 z-depth 3">
				<div class="card-content white-text" id="historyparent">
					<p>Last Messages :</p>
					<br/>
					<div class="card white lighten-2 z-depth 3">
						<div class="card-content black-text" id="history">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	</div>

	 

	<script>

	focused=true;
	angle1=0;
	angle2=0;
	viewerID = "";

	//Initialize viewerID through localStorage if it exists
	if (!localStorage.getItem("viewerID") === null)
		viewerID = localStorage.getItem("viewerID");
	
	cam1Timer = 0;
	refreshPicture();
	getLastMessages();
	getViewers();
	
	//cam2Timer = setInterval("refreshPicture(2)", 150);

	//quand on reçoit une update du nombre d'users, on màj le compteur
	/*t.on('users', function(msg) {
    document.getElementById("viewers").innerHTML=msg;
	});*/
	
	messageTimer = setInterval("getLastMessages()", 10000);
	viewerTimer = setInterval("getViewers()", 20000);
	
	</script>

</body> 





